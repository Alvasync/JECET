<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precificador de Im√≥veis com IA</title>

    <!-- Fontes -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/change-theme-button.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/magic-navigation-menu-indicator.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-animated-login-form.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/futuristic-landing-page.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modern-pricing-form.css') }}">
</head>
<body>
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash-message {{ category }}">
                    {{ message }}
                    <button type="button" class="flash-close">&times;</button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <!-- Logo -->
            <a href="#" class="nav__logo">
                <i class="ri-home-4-line"></i>
                Precificador IA
            </a>

            <!-- Menu -->
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="list active">
                        <a href="#home">
                            <span class="icon"><i class="ri-home-4-line"></i></span>
                            <span class="text">In√≠cio</span>
                        </a>
                    </li>
                    <li class="list">
                        <a href="#precificador">
                            <span class="icon"><i class="ri-calculator-line"></i></span>
                            <span class="text">Precificar</span>
                        </a>
                    </li>
                    <li class="list">
                        <a href="#sobre">
                            <span class="icon"><i class="ri-information-line"></i></span>
                            <span class="text">Sobre</span>
                        </a>
                    </li>
                    <li class="list">
                        <a href="#contato">
                            <span class="icon"><i class="ri-mail-line"></i></span>
                            <span class="text">Contato</span>
                        </a>
                    </li>
                </ul>
                <div class="indicator"></div>
            </div>

            <!-- A√ß√µes do Menu -->
            <div class="nav__actions">
                <!-- Theme Toggle -->
                <div class="theme-toggle">
                    <button class="theme-toggle-btn" id="theme-toggle">
                        <i class="ri-sun-line sun-icon"></i>
                        <i class="ri-moon-line moon-icon"></i>
                    </button>
                </div>

                <!-- Busca -->
                <button class="nav__search" id="search-btn" type="button">
                    <i class="ri-search-line"></i>
                </button>

                <!-- Login/User -->
                {% if user %}
                <div class="nav__user-menu" style="position: relative;">
                    <button class="nav__user-btn" id="user-menu-btn" type="button">
                        <i class="ri-user-fill"></i> {{ user }}
                    </button>
                    <div class="user-dropdown" id="user-dropdown" style="display: none; position: absolute; right: 0; top: 110%; background: var(--container-color); box-shadow: 0 4px 24px rgba(0,0,0,0.18); border-radius: 0.75rem; min-width: 180px; z-index: 10001; padding: 0.5rem 0; border: 1px solid var(--border-color);">
                        <a href="/perfil" class="user-dropdown-link" style="display: block; padding: 0.85rem 1.5rem; color: var(--text-color); text-decoration: none; font-size: 1rem; border-radius: 0.5rem; transition: background 0.2s;">
                            Meu Perfil
                        </a>
                        <a href="/logout" class="user-dropdown-link" style="display: block; padding: 0.85rem 1.5rem; color: var(--text-color); text-decoration: none; font-size: 1rem; border-radius: 0.5rem; transition: background 0.2s;">
                            Sair
                        </a>
                    </div>
                </div>
                <style>
                .user-dropdown-link:hover {
                    background: var(--first-color-light);
                    color: #fff !important;
                }
                .nav__user-btn {
                    background: var(--container-color);
                    border: 1px solid var(--border-color);
                    border-radius: 0.75rem;
                    padding: 0.5rem 1.25rem;
                    font-size: 1rem;
                    color: var(--title-color);
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    cursor: pointer;
                    transition: box-shadow 0.2s, border 0.2s;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
                }
                .nav__user-btn:hover {
                    border: 1.5px solid var(--first-color);
                    box-shadow: 0 4px 16px rgba(74,144,226,0.10);
                }
                </style>
                <script>
                // Dropdown do usu√°rio
                const userMenuBtn = document.getElementById('user-menu-btn');
                const userDropdown = document.getElementById('user-dropdown');
                if(userMenuBtn && userDropdown) {
                    userMenuBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block';
                    });
                    document.addEventListener('click', function(e) {
                        if(userDropdown.style.display === 'block') userDropdown.style.display = 'none';
                    });
                }
                </script>
                {% else %}
                <button class="nav__login" id="login-btn" type="button">
                    <i class="ri-user-line"></i>
                </button>
                {% endif %}

                <!-- Toggle Menu Mobile -->
                <button class="nav__toggle" id="nav-toggle" type="button">
                    <i class="ri-menu-line"></i>
                </button>
            </div>

            <!-- Bot√£o Fechar Menu Mobile -->
            <button class="nav__close" id="nav-close" type="button">
                <i class="ri-close-line"></i>
            </button>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <img src="{{ url_for('static', filename='images/bg-image.png') }}" alt="background image" class="main__bg">
        
        <!-- Home Section -->
        <section id="home">
            <!-- Landing Page Container -->
            <div class="main-landing-page-container">
                <div class="content" id="futuristic-landing-content">
                    <div class="juice-text">
                        <h1 id="landing-title">Bem-vindo ao Precificador de Im√≥veis IA</h1>
                        <p class="juice-info" id="landing-description">
                            Utilize nossa intelig√™ncia artificial para obter o pre√ßo justo do seu im√≥vel em Jacare√≠, SP.
                            Analisamos dados de casas, apartamentos e terrenos com precis√£o e rapidez.
                        </p>
                        <button class="cta-button">Come√ßar a Precificar</button>
                    </div>
                    
                    <!-- Imagens Est√°ticas -->
                    <div class="photos" id="static-images-container">
                        <div class="juice-wrapper activePhoto" data-index="0">
                            <img src="{{ url_for('static', filename='images/house1.jpeg') }}" alt="Casa" class="static-juice" />
                            <div class="property-info">
                                <h3>Casas</h3>
                                <p>Encontre a casa dos seus sonhos em Jacare√≠. Oferecemos as melhores op√ß√µes de casas, desde compactas at√© mans√µes, todas com pre√ßos justos baseados em nossa IA.</p>
                            </div>
                        </div>
                        <div class="juice-wrapper" data-index="1">
                            <img src="{{ url_for('static', filename='images/terrain1.jpeg') }}" alt="Terreno" class="static-juice" />
                            <div class="property-info">
                                <h3>Terrenos</h3>
                                <p>Invista em terrenos com alto potencial de valoriza√ß√£o. Nossa IA analisa a localiza√ß√£o e infraestrutura para garantir o melhor neg√≥cio para voc√™.</p>
                            </div>
                        </div>
                        <div class="juice-wrapper" data-index="2">
                            <img src="{{ url_for('static', filename='images/condo1.jpeg') }}" alt="Condom√≠nio" class="static-juice" />
                            <div class="property-info">
                                <h3>Condom√≠nios</h3>
                                <p>Seguran√ßa e conforto em um s√≥ lugar. Descubra condom√≠nios fechados com excelente custo-benef√≠cio, avaliados pela nossa tecnologia.</p>
                            </div>
                        </div>
                        <div class="juice-wrapper" data-index="3">
                            <img src="{{ url_for('static', filename='images/apartment1.jpeg') }}" alt="Apartamento" class="static-juice" />
                            <div class="property-info">
                                <h3>Comercial</h3>
                                <p>√ìtimas oportunidades para seu neg√≥cio. Im√≥veis comerciais em localiza√ß√µes estrat√©gicas com pre√ßos calculados pela nossa IA.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Imagens Din√¢micas -->
                <div class="juice-wheel">
                    <img src="{{ url_for('static', filename='images/house_big.jpeg') }}" alt="Casa Grande" class="dynamic-juice-1" />
                    <img src="{{ url_for('static', filename='images/terrain_big.jpeg') }}" alt="Terreno Grande" class="dynamic-juice-2" />
                    <img src="{{ url_for('static', filename='images/condo_big.jpeg') }}" alt="Condom√≠nio Grande" class="dynamic-juice-3" />
                    <img src="{{ url_for('static', filename='images/apartment_big.jpeg') }}" alt="Apartamento Grande" class="dynamic-juice-4" />
                </div>

                <!-- Imagens de Fundo -->
                <div class="fruits-wheel">
                    <img src="{{ url_for('static', filename='images/bg_house.jpeg') }}" alt="Background Casa" class="dynamic-fruits-1" />
                    <img src="{{ url_for('static', filename='images/bg_terrain.jpeg') }}" alt="Background Terreno" class="dynamic-fruits-2" />
                    <img src="{{ url_for('static', filename='images/bg_condo.jpeg') }}" alt="Background Condom√≠nio" class="dynamic-fruits-3" />
                    <img src="{{ url_for('static', filename='images/bg_apartment.jpeg') }}" alt="Background Apartamento" class="dynamic-fruits-4" />
                </div>
            </div>
        </section>

        <!-- Precificador Section -->
        <section id="precificador" class="section">
            <div class="modern-pricing-container">
                <div class="pricing-header">
                    <h2 class="pricing-title">Precifica√ß√£o Inteligente</h2>
                    <p class="pricing-subtitle">Avalie seu im√≥vel com precis√£o usando Intelig√™ncia Artificial</p>
                </div>
                <div class="pricing-form-card">
                    <form method="POST" action="#precificador" id="precificar-form" class="modern-pricing-form">
                        <div class="modern-input-group">
                            <label for="tipo_imovel" class="modern-input-label">Tipo de Im√≥vel</label>
                            <select name="tipo_imovel" id="tipo_imovel" required class="modern-input">
                                <option value="" disabled selected>Selecione o tipo</option>
                                <option value="Casa" {% if tipo_imovel == 'Casa' %}selected{% endif %}>Casa</option>
                                <option value="Apartamento" {% if tipo_imovel == 'Apartamento' %}selected{% endif %}>Apartamento</option>
                                <option value="Terreno" {% if tipo_imovel == 'Terreno' %}selected{% endif %}>Terreno</option>
                                <option value="Comercial" {% if tipo_imovel == 'Comercial' %}selected{% endif %}>Comercial</option>
                            </select>
                        </div>
                            <div class="modern-input-group">
                                <label for="cidade" class="modern-input-label">Cidade</label>
                                <select name="cidade" id="cidade" required class="modern-input">
                                    <option value="Jacare√≠" {% if cidade == 'Jacare√≠' %}selected{% endif %}>Jacare√≠</option>
                                    <option value="S√£o Jos√© dos Campos" disabled title="Em desenvolvimento">S√£o Jos√© dos Campos ‚Äî Em desenvolvimento</option>
                                </select>
                                <small style="display:block;margin-top:0.5rem;color:var(--text-color);">Atualmente suportamos Jacare√≠; S√£o Jos√© dos Campos est√° em desenvolvimento.</small>
                            </div>

                        <div class="modern-input-group">
                            <label for="bairro" class="modern-input-label">Bairro</label>
                            <select name="bairro" id="bairro" required class="modern-input">
                                <option value="" disabled selected>Selecione o bairro</option>
                        {% for b in [
                            '√Åguas de Igarat√°', 'Altos de Sant\'ana I', 'Altos de Sant\'ana II', 'Avare√≠',
                            'Balne√°rio Para√≠ba', 'Bandeira Branca I', 'Bandeira Branca II', 'Beira Rio',
                            'Bela Vista', 'Bica do Boi', 'Campo Grande', 'Cassununga', 'Centro',
                            'Chacaras Guararema', 'Chacaras Mar√≠lia', 'Chacaras Reunidas do Igarap√©s',
                            'Cidade Jardim', 'Cidade Salvador', 'Clube de Campo', 'Conjunto 1¬∞ de Maio',
                            'Conjunto 22 de Abril', 'Conjunto S√£o Benedito', 'Est√¢ncia Porto Velho',
                            'Fazenda Tr√™s Moleques', 'Igarap√©s', 'Itapo√£', 'Jardim Am√©rica',
                            'Jardim Bela Vista', 'Jardim Boa Vista', 'Jardim Calif√≥rnia', 'Jardim Coleginho',
                            'Jardim das Oliveiras', 'Jardim Em√≠lia', 'Jardim Esperan√ßa', 'Jardim Fl√≥rida',
                            'Jardim Guarani', 'Jardim Independ√™ncia', 'Jardim Jacinto', 'Jardim Leblon',
                            'Jardim Leonidia', 'Jardim Liberdade', 'Jardim Lu√≠za', 'Jardim Marcondes',
                            'Jardim Maria Am√©lia I', 'Jardim Maria Am√©lia II', 'Jardim Marister', 'Jardim Mesquita',
                            'Jardim Nic√©lia', 'Jardim Nossa Senhora de Lourdes', 'Jardim Nova Esperan√ßa',
                            'Jardim Novo Amanhecer', 'Jardim Ol√≠mpia', 'Jardim Panorama', 'Jardim Para√≠ba',
                            'Jardim Para√≠so', 'Jardim Paulistano', 'Jardim Pereira do Amparo', 'Jardim Pitoresco',
                            'Jardim Primavera', 'Jardim Real', 'Jardim Santa Maria', 'Jardim Santa Marina',
                            'Jardim Santa Terezinha', 'Jardim S√£o Gabriel', 'Jardim S√£o Jos√©', 'Jardim S√£o Luiz',
                            'Jardim S√£o Manoel', 'Jardim S√£o Paulo', 'Jardim Siesta', 'Jardim Sper',
                            'Jardim Vera L√∫cia', 'Jardim Vista Verde', 'Jardim Yolanda', 'Lagoinha',
                            'Lagoa Azul', 'Mandi', 'Mirante do Vale', 'Nova Alian√ßa', 'Nova Jacare√≠',
                            'Pagador Andrade', 'Parate√≠ de Baixo', 'Parate√≠ de Cima', 'Parate√≠ do Meio',
                            'Parque Brasil', 'Parque Calif√≥rnia', 'Parque dos Pr√≠ncipes', 'Parque dos Sinos',
                            'Parque Imperial', 'Parque Itamaraty', 'Parque Meia Lua', 'Parque Nova Am√©rica',
                            'Parque Residencial Jequitiba', 'Parque Santo Ant√¥nio', 'Parque Santa Paula',
                            'Pedramar', 'Pedras Preciosas', 'Pedregulho', 'Portal Alvorada',
                            'Prolongamento Santa Maria', 'Recanto dos P√°ssaros', 'Rem√©dios', 'Rio Abaixo',
                            'Rio Comprido', 'Santa Cruz dos L√°zaros', 'Santo Antonio da Boa Vista',
                            'S√£o Jo√£o', 'S√£o Silvestre', 'Sunset Garden', 'Terras da Concei√ß√£o',
                            'Terras de Santa Clara', 'Terras de Santa Helena', 'Terras de Sant\'ana',
                            'Terras de S√£o Jo√£o', 'Vale dos Lagos', 'Veraneio Ijal', 'Veraneio Iraj√°',
                            'Vila Apraz√≠vel', 'Vila Denise', 'Vila D\'It√°lia', 'Vila Em√≠dia Costa',
                            'Vila Formosa', 'Vila Garcia', 'Vila Lopez', 'Vila Machado', 'Vila Martinez',
                            'Vila Nossa Senhora de F√°tima', 'Vila Pinheiro', 'Vila Romana', 'Vila Santa M√¥nica',
                            'Vila Santa Rita', 'Vila S√£o Judas Tadeu', 'Vila S√£o Jo√£o II', 'Vila S√£o Sim√£o',
                            'Vila Vilma', 'Vila Zez√©', 'Vilas de Sant\'ana', 'Villa Branca', 'Vista Azul'] %}
                        <option value="{{ b }}" {% if bairro == b %}selected{% endif %}>{{ b }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="modern-input-group">
                            <label for="area_construida" class="modern-input-label">√Årea constru√≠da (m¬≤)</label>
                            <input type="number" name="area_construida" id="area_construida" min="1" max="10000" step="1" required placeholder="Ex: 70" class="modern-input">
                        </div>
                        
                        <div class="modern-input-group">
                            <label for="area_terreno" class="modern-input-label">√Årea do terreno (m¬≤)</label>
                            <input type="number" name="area_terreno" id="area_terreno" min="1" max="10000" step="1" required placeholder="Ex: 450" class="modern-input">
                        </div>
                        
                        <div class="form-grid">
                            <div class="modern-input-group">
                                <label for="quartos" class="modern-input-label">Quartos</label>
                                <input type="number" name="quartos" id="quartos" min="1" max="10" step="1" required placeholder="Ex: 3" class="modern-input">
                            </div>
                            
                            <div class="modern-input-group">
                                <label for="banheiros" class="modern-input-label">Banheiros</label>
                                <input type="number" name="banheiros" id="banheiros" min="1" max="10" step="1" required placeholder="Ex: 2" class="modern-input">
                            </div>
                        </div>
                        
                        <button type="submit" class="pricing-submit-btn">
                            <div class="btn-content">
                                <div class="btn-main">
                                    <span class="btn-icon">ÔøΩ</span>
                                    <span class="btn-text">Calcular Valor do Im√≥vel</span>
                                </div>
                                <div class="btn-details">
                                    <span class="btn-accuracy">Precis√£o de 92.7%</span>
                                    <span class="btn-time">‚Ä¢ Resultado instant√¢neo</span>
                                </div>
                            </div>
                            <div class="btn-arrow">‚Üí</div>
                        </button>
                    </form>
                </div>
                {% if preco %}
                <div class="modern-price-result" role="region" aria-live="polite">
                    <div class="price-result-content container">
                        <div style="display:flex;align-items:center;justify-content:center;gap:1rem;margin-bottom:1rem;">
                            <div class="result-icon" style="font-size:2.4rem;">üí∞</div>
                            <div>
                                <h3 class="price-result-title">Pre√ßo Estimado</h3>
                                <div class="price-result-note">Resultado estimado pela IA</div>
                            </div>
                        </div>

                        <div class="price-result-value" style="font-variant-numeric:tabular-nums;">{{ preco }}</div>

                        <div class="result-stats" style="display:flex;gap:2rem;justify-content:center;margin-top:1rem;">
                            <div class="stat-item">
                                <span class="stat-label">Precis√£o do modelo:</span>
                                <div class="stat-value">92.7%</div>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Confiabilidade:</span>
                                <div class="stat-value confidence-high">Alta</div>
                            </div>
                        </div>

                        <p class="price-result-note" style="margin-top:1rem;">
                            * Estimativa baseada em dados reais e regras de avalia√ß√£o de mercado.
                        </p>
                    </div>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Sobre Section -->
        <section id="sobre" class="section">
            <h2 class="section__title">Sobre N√≥s</h2>
            <div class="section__content">
                <p>Somos especialistas em avalia√ß√£o de im√≥veis em Jacare√≠</p>
            </div>
        </section>

        <!-- Contato Section -->
        <section id="contato" class="section">
            <h2 class="section__title">Contato</h2>
            <div class="section__content">
                <p>Entre em contato conosco</p>
            </div>
        </section>
    </main>

    <!-- Search Modal -->
    <div class="search" id="search">
        <form action="" class="search__form">
            <i class="ri-search-line search__icon"></i>
            <input type="search" placeholder="O que voc√™ est√° procurando?" class="search__input" id="search-input" autocomplete="off">
            <div id="search-suggestions" class="search__suggestions" style="position:absolute;top:3.2rem;left:0;width:100%;background:var(--container-color);border-radius:0.5rem;box-shadow:0 4px 16px rgba(0,0,0,0.08);z-index:10001;display:none;"></div>
        </form>
        <button type="button" class="search__close" id="search-close">
            <i class="ri-close-line"></i>
        </button>
    </div>

    <!-- Login Modal -->
    <div class="login" id="login">
        <div class="box">
            <button type="button" class="login__close" id="login-close">
                <i class="ri-close-line"></i>
            </button>
            
            <div class="loginBx" id="login-form">
                <h2>
                    <i class="ri-login-circle-line"></i>
                    Entrar
                </h2>
                
                <form id="loginForm" method="POST" action="/login">
                    <div class="input-group">
                        <input type="text" name="username" id="username" required>
                        <label for="username">Usu√°rio</label>
                        <i class="ri-user-line"></i>
                    </div>
                    
                    <div class="input-group">
                        <input type="password" name="password" id="password" required>
                        <label for="password">Senha</label>
                        <i class="ri-lock-line"></i>
                    </div>
                    
                    <button type="submit" class="login-btn">
                        <span>Entrar</span>
                        <i class="ri-arrow-right-line"></i>
                    </button>
                    
                    <div class="group">
                        <a href="#" class="forgot-password" onclick="showForgotPassword(event)">Esqueceu a senha?</a>
                        <a href="#" class="register" onclick="showRegister(event)">Criar conta</a>
                    </div>
                </form>
            </div>

            <!-- Formul√°rio de Registro -->
            <div class="loginBx" id="register-form" style="display: none; position: relative;">
                <h2>
                    <i class="ri-user-add-line"></i>
                    Criar Conta
                </h2>
                <form id="registerForm" method="POST" action="/register">
                    <div class="input-group">
                        <input type="text" name="reg-username" id="reg-username" required autocomplete="off">
                        <label for="reg-username">Usu√°rio</label>
                        <i class="ri-user-line"></i>
                    </div>
                    <div class="input-group">
                        <input type="email" name="reg-email" id="reg-email" required autocomplete="off">
                        <label for="reg-email">Email</label>
                        <i class="ri-mail-line"></i>
                    </div>
                    <div class="input-group">
                        <input type="password" name="reg-password" id="reg-password" required autocomplete="off">
                        <label for="reg-password">Senha</label>
                        <i class="ri-lock-line"></i>
                    </div>
                    <div class="input-group">
                        <input type="password" name="reg-confirm-password" id="reg-confirm-password" required autocomplete="off">
                        <label for="reg-confirm-password">Confirmar Senha</label>
                        <i class="ri-lock-line"></i>
                    </div>
                    <button type="submit" class="login-btn">
                        <span>Criar Conta</span>
                        <i class="ri-user-add-line"></i>
                    </button>
                    <div class="group" style="margin-top: 1.5rem; display: flex; justify-content: center;">
                        <a href="#" onclick="showLogin(event)" style="display: block; background: none; color: var(--first-color); font-weight: 500;">Voltar para Login</a>
                    </div>
                </form>
            </div>

            <!-- Formul√°rio de Recupera√ß√£o de Senha -->
            <div class="loginBx" id="forgot-password-form" style="display: none;">
                <h2>
                    <i class="ri-key-line"></i>
                    Recuperar Senha
                </h2>
                
                <form id="forgotPasswordForm" method="POST" action="/forgot-password">
                    <div class="input-group">
                        <input type="email" name="recovery-email" id="recovery-email" required>
                        <label for="recovery-email">Email</label>
                        <i class="ri-mail-line"></i>
                    </div>
                    
                    <button type="submit" class="login-btn">
                        <span>Recuperar Senha</span>
                        <i class="ri-send-plane-line"></i>
                    </button>
                    
                    <div class="group" style="margin-top: 1.5rem; display: flex; justify-content: flex-start;">
                        <a href="#" onclick="showLogin(event)" style="display: block;">Voltar para Login</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/magic-navigation-menu-indicator.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/change-theme-button.js') }}"></script>
    <script src="{{ url_for('static', filename='js/futuristic-landing-page.js') }}"></script>
    
    <!-- Script para controlar os formul√°rios de login -->
    <script>
        function showLogin(e) {
            e.preventDefault();
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('forgot-password-form').style.display = 'none';
        }
        
        function showRegister(e) {
            e.preventDefault();
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'block';
            document.getElementById('forgot-password-form').style.display = 'none';
        }
        
        function showForgotPassword(e) {
            e.preventDefault();
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('register-form').style.display = 'none';
            document.getElementById('forgot-password-form').style.display = 'block';
        }
        
        // Sistema de Precifica√ß√£o Inteligente
        class PrecificadorInteligente {
            constructor() {
                this.form = document.getElementById('precificar-form');
                this.iaStatus = {
                    indicator: document.getElementById('ia-indicator'),
                    text: document.getElementById('ia-status-text')
                };
                this.init();
            }
            
            init() {
                this.checkIAStatus();
                this.setupFormHandler();
                
                // Verificar status da IA a cada 30 segundos
                setInterval(() => this.checkIAStatus(), 30000);
            }
            
            async checkIAStatus() {
                try {
                    const response = await fetch('/api/status-ia');
                    const data = await response.json();
                    
                    if (data.ia_disponivel && data.modelo_treinado) {
                        this.updateStatus('online', 'IA Online - Modelo Treinado', '#00ff00');
                    } else if (data.ia_disponivel) {
                        this.updateStatus('training', 'IA Online - Treinando Modelo...', '#ffa500');
                    } else {
                        this.updateStatus('fallback', 'Modo Fallback - Regras Matem√°ticas', '#ff6600');
                    }
                } catch (error) {
                    this.updateStatus('offline', 'Sistema Offline', '#ff0000');
                }
            }
            
            updateStatus(status, text, color) {
                if (this.iaStatus.indicator && this.iaStatus.text) {
                    this.iaStatus.indicator.style.background = color;
                    this.iaStatus.text.textContent = text;
                }
            }
            
            setupFormHandler() {
                if (!this.form) return;
                
                this.form.addEventListener('submit', async (e) => {
                    // Permitir o envio normal do form como fallback
                    // Apenas adicionar feedback visual
                    const submitBtn = this.form.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    
                    submitBtn.innerHTML = '<i class="ri-loader-4-line" style="animation: spin 1s linear infinite;"></i> Calculando...';
                    submitBtn.disabled = true;
                    
                    // Restaurar bot√£o ap√≥s um tempo (o form ser√° submetido normalmente)
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }, 3000);
                });
            }
        }
        
        // Inicializar quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar o precificador inteligente
            window.precificador = new PrecificadorInteligente();
            
            // Adicionar anima√ß√£o de spin para o loader
            const style = document.createElement('style');
            style.textContent = `
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                
                #threejs-container {
                    transition: all 0.3s ease;
                }
                
                #threejs-container:hover {
                    transform: scale(1.05) !important;
                    box-shadow: 0 12px 48px rgba(74,144,226,0.15) !important;
                }
                
                @media (max-width: 768px) {
                    #threejs-container {
                        display: none !important;
                    }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>